<!DOCTYPE html>
<html lang="et">
<head>
<meta charset="UTF-8">
<title>Oktoobri Kutse</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
}

.overlay{
  background: rgba(255,255,255,0.85);
  min-height: 100vh;
}

.progress-bar{
  color:#fff;
  font-weight:bold;
  text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;
}

table th, table td{
  text-align:center;
}
</style>
</head>

<body>
<div class="overlay">
<div class="container py-4">

<!-- PEALKIRI -->
<div class="card shadow mb-3 text-center">
<div class="card-body">
<h4>ðŸ‡ªðŸ‡ª Oktoobri Kutse â†’ <strong>PÃ¤evi reservini</strong></h4>
<p id="clock" class="fw-bold"></p>
</div>
</div>

<!-- TABID -->
<ul class="nav nav-tabs mb-3">
<li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#progressTab">ðŸ“ˆ Edenemine</button></li>
<li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#todayTab">ðŸ§¹ TÃ¤na</button></li>
<li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#excelTab">ðŸ“Š Excel</button></li>
</ul>

<div class="tab-content">

<!-- EDENEMINE -->
<div class="tab-pane fade show active" id="progressTab">

<div class="card shadow mb-4">
<div class="card-body">

<label>Kogu periood</label>
<input id="totalDays" class="form-control mb-2" readonly>

<label>Tehtud</label>
<input id="doneDays" class="form-control mb-2" readonly>

<label>JÃ¤Ã¤nud</label>
<input id="leftDays" class="form-control mb-2" readonly>

<label>LÃ¤bitud aeg</label>
<input id="elapsedTime" class="form-control mb-2" readonly>

<label>Progress</label>
<div class="progress mb-3" style="height:30px">
<div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated">0%</div>
</div>

<label>JÃ¤rgmine eesmÃ¤rk</label>
<input id="goal" class="form-control" readonly>

</div>
</div>

<!-- SÃ•DURINALI -->
<div class="card shadow mb-4 text-center">
<div class="card-body">
<h5>ðŸ˜‚ TÃ¤nane sÃµdurinali</h5>
<p id="soldierJoke" class="fw-semibold mt-2"></p>
<small class="text-muted">Uueneb iga hommik kell 06:00</small>
</div>
</div>

</div>

<!-- TÃ„NA -->
<div class="tab-pane fade" id="todayTab">
<div class="card shadow text-center">
<div class="card-body">
<h5>ðŸ§¹ TÃ¤nased korrapidajad</h5>
<p id="todayDate" class="fw-bold"></p>
<p><strong>Parema toa korrapidaja:</strong> <span id="rightToday"></span></p>
<p><strong>Vasaku toa korrapidaja:</strong> <span id="leftToday"></span></p>
</div>
</div>
</div>

<!-- EXCEL -->
<div class="tab-pane fade" id="excelTab">
<div class="card shadow">
<div class="card-body">

<h5 class="text-center">Parema toa korrapidaja</h5>
<table class="table table-bordered table-striped mb-4">
<thead><tr><th>KuupÃ¤ev</th><th>Nimi</th></tr></thead>
<tbody id="excelRight"></tbody>
</table>

<h5 class="text-center">Vasaku toa korrapidaja</h5>
<table class="table table-bordered table-striped">
<thead><tr><th>KuupÃ¤ev</th><th>Nimi</th></tr></thead>
<tbody id="excelLeft"></tbody>
</table>

</div>
</div>
</div>

</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
// ---------- TAUSTAPILDID ----------
const backgrounds=[
 "https://images.unsplash.com/photo-1605727216801-e27ce1d0cc28",
 "https://images.unsplash.com/photo-1598387993211-5c3b8b3bdbf5",
 "https://images.unsplash.com/photo-1520975916090-3105956dac38",
 "https://images.unsplash.com/photo-1558980664-10ea7c8a6c91"
];

// ---------- NALJAD ----------
const soldierJokes=[
 "SÃµdur ei maga â€“ ta ootab suletud silmadega.",
 "Ajateenistuses Ãµpid, et 'kohe' ei tÃ¤henda kunagi.",
 "Rivis on alati kÃ¼lmem.",
 "SÃµdur sÃ¶Ã¶b alati kiiresti, isegi kodus.",
 "Kui kÃ¤stakse puhata, tuleb kohe uus kÃ¤sk.",
 "Ajateenistus Ãµpetab, et vihm tuleb alati kÃ¼lgsuunas."
];

// ---------- ANDMED ----------
const progressStart=new Date(2025,9,13);
const progressEnd=new Date(2026,5,12);

const dutyStart=new Date(2026,0,6);
const dutyEnd=new Date(2026,5,12);

const leftNames=["SUDER","PISNENKO","TAMMUS","KASPAR PLANS","VIISPERT","NURMETALO","KAAREL PLANS","MARK","KRISTI"];
const rightNames=["KOSEMAA","KUUSEORG","LUMISTE","MÃœÃœR","PAASKIVI","PEETRIS","PINT","TAMME","JAKOBSON"];

// ---------- ABI ----------
function daysBetween(a,b){
  return Math.floor((b-a)/(1000*60*60*24));
}

function elapsedTime(start,now){
  let months=0;
  let temp=new Date(start);
  while(new Date(temp.getFullYear(),temp.getMonth()+1,temp.getDate())<=now){
    temp.setMonth(temp.getMonth()+1);
    months++;
  }
  const diff=now-temp;
  const days=Math.floor(diff/(1000*60*60*24));
  const hours=Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  return `${months} kuud, ${days} pÃ¤eva, ${hours} tundi`;
}

// ---------- UPDATE ----------
function updateAll(){
const now=new Date(new Date().toLocaleString("en-US",{timeZone:"Europe/Tallinn"}));

document.getElementById("clock").innerText=
now.toLocaleDateString("et-EE")+" "+now.toLocaleTimeString("et-EE");

const total=daysBetween(progressStart,progressEnd);
const done=Math.max(0,daysBetween(progressStart,now));
const left=total-done+1;

totalDays.value=total+" pÃ¤eva";
doneDays.value=done+" pÃ¤eva";
leftDays.value=left+" pÃ¤eva";
elapsedTime.value=elapsedTime(progressStart,now);

const percent=Math.min(100,(done/total*100).toFixed(1));
progressBar.style.width=percent+"%";
progressBar.innerText=percent+"%";

const g50=Math.round(total*0.5);
const g75=Math.round(total*0.75);
goal.value=
done<g50?`50%: ${g50-done} pÃ¤eva`:
done<g75?`75%: ${g75-done} pÃ¤eva`:
done<total?`100%: ${total-done} pÃ¤eva`:"VALMIS";

const idx=daysBetween(dutyStart,now);
todayDate.innerText=now.toLocaleDateString("et-EE");
rightToday.innerText=rightNames[idx%rightNames.length];
leftToday.innerText=leftNames[idx%leftNames.length];

// NALI 06:00
let jokeDay=new Date(now);
if(now.getHours()<6) jokeDay.setDate(jokeDay.getDate()-1);
soldierJoke.innerText=soldierJokes[daysBetween(new Date(2025,0,1),jokeDay)%soldierJokes.length];

// TAUST
document.body.style.backgroundImage=
`url(${backgrounds[daysBetween(new Date(2025,0,1),now)%backgrounds.length]})`;
}

// ---------- EXCEL ----------
function fillExcel(){
let i=0;
for(let d=new Date(dutyStart);d<=dutyEnd;d.setDate(d.getDate()+1)){
excelRight.innerHTML+=`<tr><td>${d.toLocaleDateString("et-EE")}</td><td>${rightNames[i%rightNames.length]}</td></tr>`;
excelLeft.innerHTML+=`<tr><td>${d.toLocaleDateString("et-EE")}</td><td>${leftNames[i%leftNames.length]}</td></tr>`;
i++;
}
}

fillExcel();
updateAll();
setInterval(updateAll,1000);
</script>

</body>
</html>
