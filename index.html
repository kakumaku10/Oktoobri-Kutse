<!DOCTYPE html>
<html lang="et">
<head>
<meta charset="UTF-8">
<title>Oktoobri Kutse</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
}

.overlay{
  background: rgba(255,255,255,0.88);
  min-height: 100vh;
}

.progress-bar{
  color:#fff;
  font-weight:bold;
  text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;
}

table th, table td{
  text-align:center;
  font-size:14px;
}
</style>
</head>

<body>
<div class="overlay">
<div class="container py-4">

<!-- PEALKIRI -->
<div class="card shadow mb-3 text-center">
<div class="card-body">
<h4>ðŸ‡ªðŸ‡ª Oktoobri Kutse â†’ <strong>PÃ¤evi reservini</strong></h4>
<p id="clock" class="fw-bold"></p>
</div>
</div>

<!-- PROGRESS -->
<div class="card shadow mb-4">
<div class="card-body">

<label>Kogu periood</label>
<input id="totalDays" class="form-control mb-2" readonly>

<label>Tehtud</label>
<input id="doneDays" class="form-control mb-2" readonly>

<label>JÃ¤Ã¤nud</label>
<input id="leftDays" class="form-control mb-2" readonly>

<label>Progress</label>
<div class="progress mb-3" style="height:30px">
<div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated">0%</div>
</div>

<label>JÃ¤rgmine eesmÃ¤rk</label>
<input id="goal" class="form-control" readonly>

</div>
</div>

<!-- TÃ„NA -->
<div class="card shadow mb-4 text-center">
<div class="card-body">
<h5>ðŸ§¹ TÃ¤nased korrapidajad</h5>
<p id="todayDate" class="fw-bold"></p>
<p><strong>Vasak tuba:</strong> <span id="leftToday"></span></p>
<p><strong>Parem tuba:</strong> <span id="rightToday"></span></p>
</div>
</div>

<!-- LISTID KÃ•RVUTI -->
<div class="card shadow">
<div class="card-body">

<h5 class="text-center mb-4">ðŸ“‹ Toa korrapidaja list</h5>

<div class="row">

<!-- VASAK -->
<div class="col-md-6">
<h6 class="text-center">Vasak tuba</h6>
<table class="table table-bordered table-striped">
<thead><tr><th>KuupÃ¤ev</th><th>Nimi</th></tr></thead>
<tbody id="excelLeft"></tbody>
</table>
</div>

<!-- PAREM -->
<div class="col-md-6">
<h6 class="text-center">Parem tuba</h6>
<table class="table table-bordered table-striped">
<thead><tr><th>KuupÃ¤ev</th><th>Nimi</th></tr></thead>
<tbody id="excelRight"></tbody>
</table>
</div>

</div>
</div>
</div>

</div>
</div>

<script>

// ------------------- AEG -------------------
const progressStart = new Date(2025,9,13);
const progressEnd   = new Date(2026,5,12);

const dutyStart = new Date(2026,0,6);
const dutyEnd   = new Date(2026,5,12);

// ------------------- NIMEKIRJAD -------------------

// VASAK TUBA (ARU LISATUD)
const leftNames = [
"SUDER","PISNENKO","TAMMUS","KASPAR PLANS",
"VIISPERT","NURMETALO","KAAREL","MARK","KRISTI","ARU"
];

// PAREM TUBA
const rightNames = [
"KOSEMAA","KUUSEORG","LUMISTE","MÃœÃœR",
"PAASKIVI","PEETRIS","PINT","TAMME","JAKOBSON"
];

// ------------------- FUNKTSIOONID -------------------

function daysBetween(a,b){
  return Math.floor((b - a) / 86400000);
}

function updateClock(){
  const now = new Date(new Date().toLocaleString("en-US",{timeZone:"Europe/Tallinn"}));
  document.getElementById("clock").innerText =
    now.toLocaleDateString("et-EE")+" "+now.toLocaleTimeString("et-EE");

  const total = daysBetween(progressStart, progressEnd);
  const done  = Math.max(0, daysBetween(progressStart, now));
  const left  = total - done;

  document.getElementById("totalDays").value = total+" pÃ¤eva";
  document.getElementById("doneDays").value  = done+" pÃ¤eva";
  document.getElementById("leftDays").value  = left+" pÃ¤eva";

  const percent = Math.min(100,(done/total*100).toFixed(1));
  document.getElementById("progressBar").style.width = percent+"%";
  document.getElementById("progressBar").innerText = percent+"%";

  const g50=Math.round(total*0.5);
  const g75=Math.round(total*0.75);
  document.getElementById("goal").value =
    done<g50?`50%: ${g50-done} pÃ¤eva`:
    done<g75?`75%: ${g75-done} pÃ¤eva`:
    done<total?`100%: ${total-done} pÃ¤eva`:"VALMIS";

  // tÃ¤nased
  const index = daysBetween(dutyStart, now);
  document.getElementById("todayDate").innerText = now.toLocaleDateString("et-EE");
  document.getElementById("leftToday").innerText = leftNames[index%leftNames.length];
  document.getElementById("rightToday").innerText = rightNames[index%rightNames.length];
}

// ------------------- TABEL -------------------
function fillExcel(){
let i=0;
for(let d=new Date(dutyStart); d<=dutyEnd; d.setDate(d.getDate()+1)){
excelLeft.innerHTML+=`<tr><td>${d.toLocaleDateString("et-EE")}</td><td>${leftNames[i%leftNames.length]}</td></tr>`;
excelRight.innerHTML+=`<tr><td>${d.toLocaleDateString("et-EE")}</td><td>${rightNames[i%rightNames.length]}</td></tr>`;
i++;
}
}

fillExcel();
updateClock();
setInterval(updateClock,1000);

</script>

</body>
</html>
