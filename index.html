<!DOCTYPE html>
<html lang="et">
<head>
<meta charset="UTF-8">
<title>Oktoobri Kutse</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background-size:cover;
  background-position:center;
  background-attachment:fixed;
}
.overlay{
  background:rgba(255,255,255,0.8);
  min-height:100vh;
}
.progress-bar{
  color:#fff;
  font-weight:bold;
  text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000;
}
</style>
</head>

<body>
<div class="overlay">
<div class="container py-4">

<div class="card shadow text-center mb-3">
<div class="card-body">
<h4>ðŸ‡ªðŸ‡ª Oktoobri Kutse â†’ <strong>PÃ¤evi reservini</strong></h4>
<p id="clock" class="fw-bold"></p>
</div>
</div>

<div class="card shadow mb-4">
<div class="card-body">

<label>Kogu periood</label>
<input id="totalDays" class="form-control mb-2" readonly>

<label>Tehtud</label>
<input id="doneDays" class="form-control mb-2" readonly>

<label>JÃ¤Ã¤nud</label>
<input id="leftDays" class="form-control mb-2" readonly>

<label>Progress</label>
<div class="progress mb-3" style="height:30px">
<div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated">0%</div>
</div>

<label>JÃ¤rgmine eesmÃ¤rk</label>
<input id="goal" class="form-control" readonly>

</div>
</div>

</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
/* ================== KONFIG ================== */
const START_DATE = new Date(2025, 9, 13); // 13.10.2025
const END_DATE   = new Date(2026, 5, 12); // 12.06.2026

/* ================== ABIFUNKTSIOONID ================== */
const DAY_MS = 1000 * 60 * 60 * 24;

function nowTallinn(){
  return new Date(new Date().toLocaleString("en-US",{timeZone:"Europe/Tallinn"}));
}

function dayOnly(d){
  return new Date(d.getFullYear(), d.getMonth(), d.getDate());
}

function daysBetween(a,b){
  return Math.floor((b - a) / DAY_MS);
}

/* ================== UPDATE ================== */
function update(){
  const now = nowTallinn();
  document.getElementById("clock").innerText =
    now.toLocaleDateString("et-EE") + " " + now.toLocaleTimeString("et-EE");

  const today = dayOnly(now);
  const start = dayOnly(START_DATE);
  const end   = dayOnly(END_DATE);

  // KOGU PERIOOD
  const total = daysBetween(start, end) + 1;

  // TEHTUD (tÃ¤na ei loeta tehtuks)
  const done = Math.max(0, daysBetween(start, today));

  // JÃ„Ã„NUD (LÃ•PPPÃ„EV LOETAKSE KAASA)
  const left = Math.max(0, daysBetween(today, end) + 1);

  totalDays.value = total + " pÃ¤eva";
  doneDays.value  = done + " pÃ¤eva";
  leftDays.value  = left + " pÃ¤eva";

  const percent = Math.min(100, (done / total * 100).toFixed(1));
  progressBar.style.width = percent + "%";
  progressBar.innerText = percent + "%";

  const g50 = Math.round(total * 0.5);
  const g75 = Math.round(total * 0.75);

  goal.value =
    done < g50 ? `50%: ${g50 - done} pÃ¤eva` :
    done < g75 ? `75%: ${g75 - done} pÃ¤eva` :
    done < total ? `100%: ${total - done} pÃ¤eva` :
    "VALMIS";
}

update();
setInterval(update, 1000);
</script>

</body>
</html>
